# ShareHouseWork - Overview

## プロダクト概要

4LDKの一軒家に住む4人のシェアハウスメンバー向け生活管理Webアプリ。
家事・費用・ルールを一元管理し、LINEと連携することで日常の摩擦をなくす。

---

## メンバー構成と費用体系

| メンバー | 部屋 | 家賃 | 共益費（月額） | 備考 |
|--------|------|------|-------------|------|
| 家主 | — | — | ¥15,000 | 管理者 |
| 家主のパートナー | — | — | ¥15,000 | アプリ上は本人が拠出 |
| 友達１ | 6畳 | ¥60,000 | ¥15,000 | 計 ¥75,000/月 |
| 友達２ | 7畳 | ¥65,000 | ¥15,000 | 計 ¥80,000/月 |

**共益費の内訳（¥15,000/人/月）：** 水道・電気・ガス代 ＋ 消耗品 ＋ 食費の一部

> **アプリの管理スコープ：** 共益費のみ（家賃はアプリ外で管理）。共益費の金額は設定画面から変更可能。

---

## 要件定義

### ユーザー・環境

- 利用者：シェアハウスメンバー 4人
- デバイス：スマートフォン・PCどちらでも利用（レスポンシブ対応）
- 認証：LINEログイン（OAuth）

---

### 機能要件

#### 1. 家事管理

- 家事タスクの一覧表示（カテゴリ別グループ：キッチン・浴室・リビング・ゴミ出し など）
- 誰でも自由に「完了」チェックできる（担当固定なし・フリー制）
- 同日に複数人が同じタスクを完了報告できる（全員にポイントが付与される）
- 完了履歴の記録（誰がいつやったか）
- タスクの追加・編集・削除（管理権限を持つメンバーが操作）
- **ポイントシステム：** タスクごとに個別ポイントを設定（例：浴室掃除=3pt、ゴミ出し=1pt）
- **貢献度グラフ：** 過去30日間の累計ポイントを4人分の円グラフで表示（ホームに簡易版、/tasksに詳細版）
- **LINEからの完了報告：** LINEリッチメニューのボタンをタップして完了送信（Messaging API経由で記録）

#### 2. 費用管理

- **対象：共益費のみ**（家賃はアプリ外で管理）
- 月ごとの定額拠出（メンバー全員が毎月¥15,000を拠出するイメージ）
  - 拠出金額は設定画面から変更可能（全員共通の金額）
- 共有費の支出記録（品目・金額・日付・購入者）
- 月次残高の確認（定額合計 − 支出合計）
- 支出履歴の閲覧

#### 3. ハウスルール

- ルール文書の作成・編集・閲覧
- 複数ルールをカテゴリ分けして管理（例：キッチン、リビング、ゴミ など）
- 更新履歴の記録

#### 4. 買い物リスト

- 「これ買ってきて」掲示板形式
- アイテムの追加（品名・数量・メモ）
- 購入済みチェック（誰が買ったか記録）
- 完了済みアイテムのアーカイブ

#### 5. お知らせ・通知

- 全員への重要連絡の投稿（掲示板形式）
- LINE通知連携：
  - 家事タスクが完了されたとき
  - 買い物リストにアイテムが追加されたとき
  - お知らせが投稿されたとき

---

### 非機能要件

- レスポンシブデザイン（スマホ・PC両対応）
- LINEログインによる簡単な認証（追加登録不要）
- シンプルで直感的なUI（技術リテラシーを問わず使える）
- ハウス単位でのデータ分離（将来的に複数ハウスへ対応できる設計）

---

## 技術スタック（案）

| レイヤー | 技術 | 理由 |
|--------|------|------|
| フレームワーク | Next.js (App Router) + TypeScript | フロント・バックを一元管理、型安全 |
| スタイリング | Tailwind CSS | レスポンシブ対応が容易 |
| DB | PostgreSQL + Prisma ORM | 型安全なDB操作、スキーマ管理が楽 |
| 認証 | NextAuth.js (LINE Provider) | LINEログインを簡単に実装 |
| LINE通知 | LINE Messaging API | Webhookでイベント通知 |
| ホスティング | Vercel + Supabase (or Neon) | Next.jsとの相性が良く、無料枠あり |

---

## 画面構成

詳細は [UIdesign.md](UIdesign.md) を参照。

```
/ (ホーム・ダッシュボード)
├── /tasks          - 家事管理
├── /expenses       - 費用管理
├── /rules          - ハウスルール
├── /shopping       - 買い物リスト
└── /notices        - お知らせ
```

---

## 今後の検討事項

- [ ] LINEリッチメニューに載せるタスクの選定（最大6枠）
- [ ] LINE通知の粒度（全イベント通知 or 重要なもののみ）
- [ ] 管理者権限の有無（全員同権 or 1人が管理者）
- [ ] データのバックアップ・エクスポート機能の要否
